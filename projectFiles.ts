export const PROJECT_FILES = [
  {
    "path": "package.json",
    "content": "{\n  \"name\": \"family-chore-tracker\",\n  \"private\": true,\n  \"version\": \"1.0.0\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"dev\": \"vite\",\n    \"build\": \"vite build\",\n    \"preview\": \"vite preview\"\n  },\n  \"dependencies\": {\n    \"lucide-react\": \"^0.562.0\",\n    \"react\": \"^18.2.0\",\n    \"react-dom\": \"^18.2.0\",\n    \"framer-motion\": \"^10.16.4\"\n  },\n  \"devDependencies\": {\n    \"@types/react\": \"^18.2.64\",\n    \"@types/react-dom\": \"^18.2.21\",\n    \"@vitejs/plugin-react\": \"^4.2.1\",\n    \"autoprefixer\": \"^10.4.18\",\n    \"postcss\": \"^8.4.35\",\n    \"tailwindcss\": \"^3.4.1\",\n    \"typescript\": \"^5.2.2\",\n    \"vite\": \"^5.1.6\"\n  }\n}"
  },
  {
    "path": "vite.config.ts",
    "content": "import { defineConfig } from 'vite';\nimport react from '@vitejs/plugin-react';\n\nexport default defineConfig({\n  plugins: [react()],\n});"
  },
  {
    "path": "tsconfig.json",
    "content": "{\n  \"compilerOptions\": {\n    \"target\": \"ES2020\",\n    \"useDefineForClassFields\": true,\n    \"lib\": [\"ES2020\", \"DOM\", \"DOM.Iterable\"],\n    \"module\": \"ESNext\",\n    \"skipLibCheck\": true,\n    \"moduleResolution\": \"bundler\",\n    \"allowImportingTsExtensions\": true,\n    \"resolveJsonModule\": true,\n    \"isolatedModules\": true,\n    \"noEmit\": true,\n    \"jsx\": \"react-jsx\",\n    \"strict\": true,\n    \"noUnusedLocals\": true,\n    \"noUnusedParameters\": true,\n    \"noFallthroughCasesInSwitch\": true\n  },\n  \"include\": [\".\"]\n}"
  },
  {
    "path": "index.html",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Family Chore Tracker Pro</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\" rel=\"stylesheet\">\n    <style>\n        body { font-family: 'Inter', sans-serif; background-color: #111827; }\n        ::-webkit-scrollbar { width: 8px; }\n        ::-webkit-scrollbar-track { background: #1f2937; }\n        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 4px; }\n        ::-webkit-scrollbar-thumb:hover { background: #6b7280; }\n    </style>\n</head>\n<body>\n    <div id=\"root\"></div>\n    <script type=\"module\" src=\"/index.tsx\"></script>\n</body>\n</html>"
  },
  {
    "path": "index.tsx",
    "content": "import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\nconst rootElement = document.getElementById('root');\nif (!rootElement) {\n  throw new Error(\"Could not find root element to mount to\");\n}\n\nconst root = ReactDOM.createRoot(rootElement);\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);"
  },
  {
    "path": "constants.ts",
    "content": "export const MASTER_CHORES = [\n  { \"id\": \"bxcbrsrrd\", \"name\": \"Dump run\", \"xp\": 530, \"estMinutes\": 45, \"category\": \"Outdoor\" },\n  { \"id\": \"mw2g482qv\", \"name\": \"Cook dinner for 2+ people\", \"xp\": 470, \"estMinutes\": 40, \"category\": \"Kitchen\" },\n  { \"id\": \"uKSZX4xgOO91zIXzUKjd\", \"name\": \"Clean shower/tub\", \"xp\": 400, \"estMinutes\": 25, \"category\": \"Bathroom\" },\n  { \"id\": \"ufdsyAozw237Fxtg3VjY\", \"name\": \"Load dishwasher\", \"xp\": 310, \"estMinutes\": 18, \"category\": \"Kitchen\" },\n  { \"id\": \"aXRWlLj6fhR5xUxxCZuP\", \"name\": \"Mop\", \"xp\": 310, \"estMinutes\": 20, \"category\": \"General\" },\n  { \"id\": \"1ond3afur\", \"name\": \"Sort recycling\", \"xp\": 295, \"estMinutes\": 20, \"category\": \"General\" },\n  { \"id\": \"qi25rgn52iEouEOrL3sf\", \"name\": \"Vacuum\", \"xp\": 270, \"estMinutes\": 20, \"category\": \"General\" },\n  { \"id\": \"SqBQOfYWk6qtLuzM62wg\", \"name\": \"Clean toilet\", \"xp\": 255, \"estMinutes\": 10, \"category\": \"Bathroom\" },\n  { \"id\": \"5fdpwSG0q8gucT25wGTQ\", \"name\": \"Dog poop\", \"xp\": 240, \"estMinutes\": 10, \"category\": \"Pets\" },\n  { \"id\": \"fL0SuijXS9MmXInAyW9a\", \"name\": \"Make Brunch for 2+\", \"xp\": 235, \"estMinutes\": 18, \"category\": \"Kitchen\" },\n  { \"id\": \"HYso3r7fOwcTHWKZsXrg\", \"name\": \"Wash bedding\", \"xp\": 220, \"estMinutes\": 15, \"category\": \"Bedroom & Laundry\" },\n  { \"id\": \"QRD2H3CI8vT5BzwiQObk\", \"name\": \"Clean bathroom sink /counter\", \"xp\": 205, \"estMinutes\": 10, \"category\": \"Bathroom\" },\n  { \"id\": \"g49u8tXGGXkOuZschR4L\", \"name\": \"Cat box\", \"xp\": 190, \"estMinutes\": 5, \"category\": \"Pets\" },\n  { \"id\": \"RpGSjeWU5X6SWifyU87j\", \"name\": \"Fold laundry\", \"xp\": 190, \"estMinutes\": 15, \"category\": \"Bedroom & Laundry\" },\n  { \"id\": \"XH8e11kycvYc68nY0tIe\", \"name\": \"Take out garbage\", \"xp\": 180, \"estMinutes\": 5, \"category\": \"Outdoor\" },\n  { \"id\": \"XDUqMG5TsjDMr03q6Hpq\", \"name\": \"Mixed laundry load\", \"xp\": 155, \"estMinutes\": 10, \"category\": \"Bedroom & Laundry\" },\n  { \"id\": \"VTdWUQH5J8VND8VH24dE\", \"name\": \"Empty dishwasher\", \"xp\": 150, \"estMinutes\": 11, \"category\": \"Kitchen\" },\n  { \"id\": \"wQ14T5rqpmx1GsXaWgBs\", \"name\": \"Take out recycling\", \"xp\": 130, \"estMinutes\": 5, \"category\": \"Outdoor\" }\n];"
  },
  {
    "path": "types.ts",
    "content": "export interface Member {\n  id: string;\n  name: string;\n  color: string;\n  joinedAt?: any;\n}\n\nexport interface Chore {\n  id: string;\n  name: string;\n  createdAt?: any;\n  order?: number;     // For manual sorting\n  category?: string;  // For grouping (Kitchen, etc)\n  xp: number;         // Gamification value\n  estMinutes: number; // Duration estimate\n}\n\nexport interface ChoreLog {\n  id: string;\n  choreId: string;\n  memberId: string;\n  timestamp: any;\n  isManual?: boolean;\n}\n\nexport interface DistributionItem {\n  label: string;\n  value: number;\n  color: string;\n  id: string;\n}\n\nexport type AppView = 'dashboard' | 'chore_detail' | 'settings' | 'stats';"
  },
  {
    "path": "utils.ts",
    "content": "import { MASTER_CHORES } from './constants';\n\nexport const generateColor = (str: string): string => {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  const c = (hash & 0x00ffffff).toString(16).toUpperCase();\n  return '#' + '00000'.substring(0, 6 - c.length) + c;\n};\n\nexport const getTimestamp = (t: any): number => {\n    if (!t) return 0;\n    // Handle Firestore-like timestamp objects\n    if (typeof t.toDate === 'function') return t.toDate().getTime();\n    // Handle strings or Date objects\n    const d = new Date(t);\n    return isNaN(d.getTime()) ? 0 : d.getTime();\n};\n\nexport const formatDate = (timestamp: any): string => {\n  if (!timestamp) return '';\n  const date = new Date(getTimestamp(timestamp));\n  return new Intl.DateTimeFormat('en-US', {\n    month: 'short', \n    day: 'numeric', \n    hour: 'numeric', \n    minute: '2-digit'\n  }).format(date);\n};\n\nexport const getRelativeTime = (timestamp: any): string => {\n  if (!timestamp) return 'Never';\n  const date = new Date(getTimestamp(timestamp));\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n  \n  if (diffDays === 0) return 'Today';\n  if (diffDays === 1) return 'Yesterday';\n  return `${diffDays} days ago`;\n};\n\nexport const getDayName = (dateInput: any): string => {\n    const date = new Date(getTimestamp(dateInput));\n    return new Intl.DateTimeFormat('en-US', { weekday: 'long' }).format(date);\n};\n\nexport const getHour = (dateInput: any): number => {\n    const date = new Date(getTimestamp(dateInput));\n    return date.getHours();\n};\n\n// Legacy estimator - now used as fallback\nexport const estimateChoreDuration = (choreName: string): number => {\n    const lower = choreName.toLowerCase();\n    if (lower.includes('dish') || lower.includes('wash') || lower.includes('clean') || lower.includes('vacuum') || lower.includes('mow')) return 20;\n    if (lower.includes('laundry') || lower.includes('fold') || lower.includes('grocer') || lower.includes('cook')) return 30;\n    if (lower.includes('trash') || lower.includes('feed') || lower.includes('bed') || lower.includes('mail') || lower.includes('wipe')) return 5;\n    if (lower.includes('tidy') || lower.includes('organize')) return 15;\n    return 10; // Default average\n};\n\nexport const getChoreCategory = (choreName: string): string => {\n    const lower = choreName.toLowerCase();\n    if (lower.includes('kitchen') || lower.includes('dish') || lower.includes('cook') || lower.includes('meal') || lower.includes('fridge')) return 'Kitchen';\n    if (lower.includes('bath') || lower.includes('toilet') || lower.includes('shower')) return 'Bathroom';\n    if (lower.includes('bed') || lower.includes('laundry') || lower.includes('clothes') || lower.includes('fold')) return 'Bedroom & Laundry';\n    if (lower.includes('mow') || lower.includes('garden') || lower.includes('yard') || lower.includes('car')) return 'Outdoor';\n    if (lower.includes('dog') || lower.includes('cat') || lower.includes('feed') || lower.includes('pet')) return 'Pets';\n    return 'General';\n};\n\nexport const formatDuration = (minutes: number): string => {\n    if (minutes < 60) return `${Math.round(minutes)}m`;\n    const hours = Math.floor(minutes / 60);\n    const mins = Math.round(minutes % 60);\n    return mins > 0 ? `${hours}h ${mins}m` : `${hours}h`;\n};\n\n/**\n * Smart Heuristic Calculation for new chores.\n * 1. Checks exact match in Master Data.\n * 2. Checks fuzzy keyword match in Master Data.\n * 3. Falls back to estimation logic.\n */\nexport const predictChoreValues = (name: string): { xp: number, estMinutes: number, category: string } => {\n    const lowerName = name.trim().toLowerCase();\n\n    // 1. Exact Match\n    const exactMatch = MASTER_CHORES.find(c => c.name.toLowerCase() === lowerName);\n    if (exactMatch) {\n        return { \n            xp: exactMatch.xp, \n            estMinutes: exactMatch.estMinutes, \n            category: exactMatch.category \n        };\n    }\n\n    // 2. Fuzzy Match (Keywords)\n    // We check if the new chore name contains words from a master chore, or vice versa (for partials)\n    const fuzzyMatch = MASTER_CHORES.find(c => {\n        const masterWords = c.name.toLowerCase().split(' ');\n        // Match if any significant word from master chore exists in input\n        return masterWords.some(w => w.length > 3 && lowerName.includes(w));\n    });\n\n    if (fuzzyMatch) {\n        return {\n            xp: fuzzyMatch.xp,\n            estMinutes: fuzzyMatch.estMinutes,\n            category: fuzzyMatch.category\n        };\n    }\n\n    // 3. Fallback Heuristics\n    const estMinutes = estimateChoreDuration(name);\n    // Formula: XP = (EstTime * 10) + 50\n    const xp = (estMinutes * 10) + 50; \n    const category = getChoreCategory(name);\n\n    return { xp, estMinutes, category };\n};"
  },
  {
    "path": "components/Charts.tsx",
    "content": "import React from 'react';\nimport { DistributionItem, ChoreLog } from '../types';\nimport { getTimestamp } from '../utils';\nimport { motion } from 'framer-motion';\n\ninterface DistributionBarProps {\n  data: DistributionItem[];\n  total: number;\n}\n\nexport const DistributionBar: React.FC<DistributionBarProps> = ({ data, total }) => {\n  if (total === 0) return <div className=\"text-gray-400 text-sm italic\">No data yet</div>;\n  return (\n    <div className=\"w-full h-3 flex rounded-full overflow-hidden my-2 bg-gray-700\">\n      {data.map((item, idx) => {\n        const width = (item.value / total) * 100;\n        if (width === 0) return null;\n        return (\n          <motion.div \n            key={item.id || idx} \n            initial={{ width: 0 }}\n            animate={{ width: `${width}%` }}\n            transition={{ duration: 1, type: \"spring\", bounce: 0.2 }}\n            style={{ backgroundColor: item.color }}\n            className=\"h-full\"\n            title={`${item.label}: ${Math.round(width)}%`}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\ninterface MiniContributionBarProps {\n    value: number;\n    total: number;\n    color: string;\n}\n\nexport const MiniContributionBar: React.FC<MiniContributionBarProps> = ({ value, total, color }) => {\n    const percentage = total > 0 ? (value / total) * 100 : 0;\n    return (\n        <div className=\"w-full h-1.5 bg-gray-800 rounded-full overflow-hidden mt-1\">\n            <motion.div \n                className=\"h-full rounded-full\"\n                style={{ backgroundColor: color }}\n                initial={{ width: 0 }}\n                animate={{ width: `${percentage}%` }}\n                transition={{ duration: 0.8, type: \"spring\" }}\n            />\n        </div>\n    );\n};\n\ninterface DonutChartProps {\n  data: DistributionItem[];\n  total: number;\n  size?: number;\n}\n\nexport const DonutChart: React.FC<DonutChartProps> = ({ data, total, size = 140 }) => {\n  if (total === 0) return (\n    <div style={{ width: size, height: size }} className=\"rounded-full border-4 border-gray-700 flex items-center justify-center text-xs text-gray-500\">\n        No Data\n    </div>\n  );\n  \n  let gradientString = \"\";\n  let currentDeg = 0;\n  data.forEach((item, idx) => {\n    const deg = (item.value / total) * 360;\n    gradientString += `${item.color} ${currentDeg}deg ${currentDeg + deg}deg${idx === data.length - 1 ? '' : ', '}`;\n    currentDeg += deg;\n  });\n\n  return (\n    <motion.div \n        initial={{ opacity: 0, scale: 0.8, rotate: -90 }}\n        animate={{ opacity: 1, scale: 1, rotate: 0 }}\n        transition={{ duration: 0.8, type: \"spring\" }}\n        className=\"relative flex items-center justify-center group\" \n        style={{ width: size, height: size }}\n    >\n       <div \n         className=\"absolute inset-0 rounded-full\"\n         style={{ background: `conic-gradient(${gradientString})` }}\n       ></div>\n       <div className=\"absolute inset-2 bg-gray-900 rounded-full flex flex-col items-center justify-center z-10 border border-gray-800 shadow-inner\">\n            <motion.span \n                initial={{ scale: 0.5 }}\n                animate={{ scale: 1 }}\n                transition={{ delay: 0.2 }}\n                className=\"text-2xl font-bold text-white group-hover:scale-110 transition-transform\"\n            >\n                {total}\n            </motion.span>\n            <span className=\"text-[10px] uppercase text-gray-400 font-bold tracking-wider\">Tasks</span>\n       </div>\n    </motion.div>\n  );\n};\n\ninterface WeeklyActivityGraphProps {\n  logs: ChoreLog[];\n}\n\nexport const WeeklyActivityGraph: React.FC<WeeklyActivityGraphProps> = ({ logs }) => {\n    const days = [];\n    const normalizeDate = (d: Date) => {\n        return new Date(d.getFullYear(), d.getMonth(), d.getDate()).getTime();\n    };\n\n    // Last 7 days including today\n    for(let i=6; i>=0; i--) {\n        const d = new Date();\n        d.setDate(d.getDate() - i);\n        days.push({ \n            timestamp: normalizeDate(d),\n            label: new Intl.DateTimeFormat('en-US', { weekday: 'narrow' }).format(d),\n            count: 0 \n        });\n    }\n    \n    logs.forEach(log => {\n        const logDate = new Date(getTimestamp(log.timestamp));\n        const normalizedLogTime = normalizeDate(logDate);\n        \n        const bucket = days.find(d => d.timestamp === normalizedLogTime);\n        if (bucket) bucket.count++;\n    });\n\n    const maxVal = Math.max(...days.map(d => d.count), 1);\n\n    return (\n        <div className=\"flex justify-between items-stretch h-32 gap-2 w-full pt-4\">\n            {days.map((day, i) => {\n                const heightPct = maxVal > 0 ? (day.count / maxVal) * 100 : 0;\n                // Min height 10% or 2px if there's any data to show it exists\n                const finalHeight = day.count > 0 ? Math.max(heightPct, 10) : 2;\n                const isToday = i === 6;\n                \n                return (\n                    <div key={i} className=\"flex flex-col items-center gap-2 flex-1 justify-end group cursor-default\">\n                         <div className=\"w-full relative flex-1 flex items-end justify-center\">\n                             <motion.div \n                                initial={{ height: 0 }}\n                                animate={{ height: `${finalHeight}%` }}\n                                transition={{ duration: 0.8, type: \"spring\", delay: i * 0.05 }}\n                                className={`w-full max-w-[20px] rounded-t-sm ${day.count > 0 ? 'bg-blue-500 group-hover:bg-blue-400 group-hover:shadow-[0_0_10px_rgba(59,130,246,0.5)]' : 'bg-gray-800'}`}\n                             />\n                         </div>\n                         <span className={`text-[10px] font-bold ${isToday ? 'text-blue-400' : 'text-gray-500'}`}>{day.label}</span>\n                    </div>\n                )\n            })}\n        </div>\n    )\n}\n\ninterface DayOfWeekChartProps {\n    logs: ChoreLog[];\n}\n\nexport const DayOfWeekChart: React.FC<DayOfWeekChartProps> = ({ logs }) => {\n    const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n    const counts = new Array(7).fill(0);\n\n    logs.forEach(log => {\n        const d = new Date(getTimestamp(log.timestamp));\n        counts[d.getDay()]++;\n    });\n\n    const maxVal = Math.max(...counts, 1);\n\n    return (\n        <div className=\"w-full p-4 bg-gray-900/40 border border-gray-800 rounded-2xl hover:border-gray-700 transition-colors\">\n            <h3 className=\"text-[10px] font-black uppercase tracking-widest text-gray-500 mb-4\">Daily Rhythm</h3>\n            <div className=\"flex justify-between items-stretch h-32 gap-1 sm:gap-2\">\n                {days.map((day, i) => (\n                    <div key={day} className=\"flex flex-col items-center gap-2 flex-1 justify-end\">\n                        <div className=\"w-full relative flex-1 flex items-end justify-center group\">\n                            <motion.div \n                                initial={{ height: 0 }}\n                                animate={{ height: `${Math.max((counts[i] / maxVal) * 100, 5)}%` }}\n                                transition={{ type: \"spring\", damping: 12, delay: i * 0.05 }}\n                                className=\"w-full max-w-[30px] bg-purple-500/20 group-hover:bg-purple-500 rounded-t-md\"\n                            />\n                            {counts[i] > 0 && (\n                                <span className=\"absolute -top-5 text-[10px] font-bold text-white opacity-0 group-hover:opacity-100 transition-opacity\">{counts[i]}</span>\n                            )}\n                        </div>\n                        <span className=\"text-[8px] sm:text-[10px] font-bold text-gray-500 uppercase\">{day.substring(0, 3)}</span>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\ninterface VerticalBarChartProps {\n    data: DistributionItem[];\n    title?: string;\n}\n\nexport const VerticalBarChart: React.FC<VerticalBarChartProps> = ({ data, title }) => {\n    const maxVal = Math.max(...data.map(d => d.value), 1);\n    \n    return (\n        <div className=\"w-full p-4 bg-gray-900/40 border border-gray-800 rounded-2xl\">\n            {title && <h3 className=\"text-[10px] font-black uppercase tracking-widest text-gray-500 mb-4\">{title}</h3>}\n            <div className=\"space-y-3\">\n                {data.map((item, index) => (\n                    <motion.div \n                        key={item.id} \n                        initial={{ opacity: 0, x: -10 }}\n                        animate={{ opacity: 1, x: 0 }}\n                        transition={{ delay: index * 0.1 }}\n                        className=\"flex items-center gap-3 group\"\n                    >\n                         <div className=\"w-20 text-xs font-bold text-gray-400 truncate text-right group-hover:text-white transition-colors\">{item.label}</div>\n                         <div className=\"flex-1 h-4 bg-gray-800 rounded-full overflow-hidden relative\">\n                             <motion.div \n                                initial={{ width: 0 }}\n                                animate={{ width: `${(item.value / maxVal) * 100}%` }}\n                                transition={{ type: \"spring\", duration: 1 }}\n                                style={{ backgroundColor: item.color }} \n                                className=\"h-full rounded-full absolute top-0 left-0 group-hover:brightness-110\"\n                             />\n                         </div>\n                         <div className=\"w-12 text-xs font-mono font-bold text-white text-right\">{item.value}</div>\n                    </motion.div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport const DailyBreakdownChart: React.FC<{ logs: ChoreLog[] }> = ({ logs }) => {\n    // Last 7 days breakdown\n    const daysMap = new Map<string, number>();\n    for(let i=6; i>=0; i--) {\n        const d = new Date();\n        d.setDate(d.getDate() - i);\n        daysMap.set(d.toDateString(), 0);\n    }\n\n    logs.forEach(l => {\n        const d = new Date(getTimestamp(l.timestamp));\n        const k = d.toDateString();\n        if (daysMap.has(k)) {\n            daysMap.set(k, (daysMap.get(k) || 0) + 1);\n        }\n    });\n\n    const maxVal = Math.max(...Array.from(daysMap.values()), 1);\n\n    return (\n        <div className=\"h-32 flex justify-between gap-1 mt-4 px-2 items-stretch\">\n            {Array.from(daysMap.entries()).map(([dateStr, count], idx) => {\n                const date = new Date(dateStr);\n                const dayLabel = new Intl.DateTimeFormat('en-US', { weekday: 'narrow' }).format(date);\n                const hPct = (count / maxVal) * 100;\n                \n                return (\n                    <div key={dateStr} className=\"flex-1 flex flex-col items-center gap-2 group justify-end\">\n                        <div className=\"w-full bg-gray-800/50 rounded-t-lg relative flex-1 flex items-end overflow-hidden hover:bg-gray-800 transition-colors\">\n                            <motion.div \n                                initial={{ height: 0 }}\n                                animate={{ height: `${Math.max(hPct, 0)}%` }}\n                                transition={{ duration: 0.8, type: \"spring\", delay: idx * 0.05 }}\n                                className={`w-full ${count > 0 ? 'bg-gradient-to-t from-emerald-600 to-emerald-400 group-hover:from-emerald-500 group-hover:to-emerald-300' : 'bg-transparent'}`}\n                            />\n                            <div className=\"absolute -top-6 left-1/2 -translate-x-1/2 text-xs font-bold text-white opacity-0 group-hover:opacity-100 transition-opacity\">\n                                {count}\n                            </div>\n                        </div>\n                        <span className=\"text-[10px] text-gray-500 uppercase font-bold\">{dayLabel}</span>\n                    </div>\n                );\n            })}\n        </div>\n    );\n};\n\ninterface HouseholdLevelProps {\n    totalXP: number;\n}\n\nexport const HouseholdLevel: React.FC<HouseholdLevelProps> = ({ totalXP }) => {\n    const level = Math.floor(totalXP / 1000) + 1;\n    const progress = (totalXP % 1000) / 10; // 0 to 100 percentage within the 1000 XP bucket\n    const nextLevelXP = level * 1000;\n    \n    return (\n        <div className=\"w-full bg-gray-900/60 border border-gray-800 rounded-xl p-4 mb-6 relative overflow-hidden group\">\n            <div className=\"absolute top-0 left-0 w-full h-1 bg-gray-800\">\n                <motion.div \n                    initial={{ width: 0 }}\n                    animate={{ width: `${progress}%` }}\n                    transition={{ duration: 1.5, type: \"spring\" }}\n                    className=\"h-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500\"\n                />\n            </div>\n            <div className=\"flex justify-between items-end\">\n                <div>\n                    <div className=\"text-[10px] font-black uppercase tracking-widest text-gray-500 mb-1\">Household Level</div>\n                    <div className=\"text-3xl font-black text-white flex items-baseline gap-2\">\n                        {level}\n                        <span className=\"text-sm font-medium text-gray-400\">Rank</span>\n                    </div>\n                </div>\n                <div className=\"text-right\">\n                    <div className=\"text-xs font-bold text-gray-400 mb-1\">\n                        <span className=\"text-white\">{Math.round(totalXP)}</span> <span className=\"text-gray-600\">/</span> {nextLevelXP} XP\n                    </div>\n                    <div className=\"text-[10px] text-gray-600 font-mono\">\n                        {Math.floor(1000 - (totalXP % 1000))} XP to Level {level + 1}\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\ninterface StatCardProps {\n    icon: React.ReactNode;\n    title: string;\n    value: string | number;\n    subtext: string;\n    colorClass?: string;\n    className?: string;\n}\n\nexport const StatCard: React.FC<StatCardProps> = ({ icon, title, value, subtext, colorClass = \"text-white\", className = \"\" }) => (\n    <motion.div \n        whileHover={{ scale: 1.05, borderColor: 'rgba(255,255,255,0.2)' }}\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n        className={`bg-gray-800/40 border border-gray-800 p-4 rounded-2xl flex flex-col items-center text-center gap-2 transition-colors ${className}`}\n    >\n        <div className={`p-3 rounded-full bg-gray-900 ${colorClass} mb-1 shadow-lg`}>\n            {icon}\n        </div>\n        <h4 className=\"text-[10px] font-black uppercase tracking-widest text-gray-500\">{title}</h4>\n        <div className={`text-xl font-bold ${colorClass}`}>{value}</div>\n        <p className=\"text-[10px] text-gray-400 leading-tight\">{subtext}</p>\n    </motion.div>\n);"
  },
  {
    "path": "App.tsx",
    "content": "import React, { useState, useEffect } from 'react';\nimport { \n  Users, \n  Trophy, \n  Activity, \n  CheckCircle, \n  Calendar, \n  Flame, \n  Clock, \n  ArrowLeft,\n  Settings,\n  PieChart,\n  ChartColumn,\n  Award,\n  Download,\n  Upload,\n  Database,\n  Trash,\n  Copy,\n  X,\n  Github,\n  Zap,\n  Moon,\n  Sun,\n  Coffee,\n  Crown,\n  TrendingUp,\n  Target,\n  Eye,\n  EyeOff,\n  Clipboard,\n  GitBranch,\n  Lightbulb,\n  Hourglass,\n  DollarSign\n} from 'lucide-react';\nimport { Member, Chore, ChoreLog, AppView, DistributionItem } from './types';\nimport { generateColor, formatDate, getRelativeTime, getDayName, getHour, estimateChoreDuration, getChoreCategory, formatDuration, predictChoreValues } from './utils';\nimport { DistributionBar, DonutChart, WeeklyActivityGraph, VerticalBarChart, StatCard, MiniContributionBar, DayOfWeekChart, HouseholdLevel } from './components/Charts';\nimport { PROJECT_FILES } from './projectFiles';\n\nconst App: React.FC = () => {\n  const [view, setView] = useState<AppView>('dashboard');\n  const [activeChoreId, setActiveChoreId] = useState<string | null>(null);\n  \n  // App ID Management\n  const [manualAppId, setManualAppId] = useState(\"\"); \n  const appId = manualAppId.trim() !== \"\" ? manualAppId.trim() : \"default-family-id\";\n  \n  // Data State\n  const [members, setMembers] = useState<Member[]>([]);\n  const [chores, setChores] = useState<Chore[]>([]);\n  const [logs, setLogs] = useState<ChoreLog[]>([]);\n  \n  // Inputs\n  const [newMemberName, setNewMemberName] = useState('');\n  const [newChoreName, setNewChoreName] = useState('');\n  const [newChoreCategory, setNewChoreCategory] = useState('');\n  const [manualDate, setManualDate] = useState('');\n  \n  // Migration State\n  const [importJson, setImportJson] = useState('');\n  const [exportJson, setExportJson] = useState('');\n  const [isImporting, setIsImporting] = useState(false);\n\n  // GitHub Integration State\n  const [ghToken, setGhToken] = useState('');\n  const [showGhToken, setShowGhToken] = useState(false);\n  const [ghRepo, setGhRepo] = useState('family-chore-tracker');\n  const [ghBranch, setGhBranch] = useState('ThreePeak-patch-1');\n  const [isUploading, setIsUploading] = useState(false);\n\n  // Persistence Simulation\n  useEffect(() => {\n    const saved = localStorage.getItem(`chore_data_${appId}`);\n    if (saved) {\n      const parsed = JSON.parse(saved);\n      setMembers(parsed.members || []);\n      setChores(parsed.chores || []);\n      setLogs(parsed.logs || []);\n    } else {\n      setMembers([]); setChores([]); setLogs([]);\n    }\n  }, [appId]);\n\n  useEffect(() => {\n    const data = { members, chores, logs };\n    localStorage.setItem(`chore_data_${appId}`, JSON.stringify(data));\n  }, [members, chores, logs, appId]);\n\n  /* ACTIONS */\n  const handleAddMember = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!newMemberName.trim()) return;\n    const newMember: Member = {\n      id: Math.random().toString(36).substr(2, 9),\n      name: newMemberName.trim(),\n      color: generateColor(newMemberName.trim()),\n      joinedAt: new Date()\n    };\n    setMembers([...members, newMember]);\n    setNewMemberName('');\n  };\n\n  const handleAddChore = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!newChoreName.trim()) return;\n    \n    // Smart Prediction Logic\n    const { xp, estMinutes, category: predictedCategory } = predictChoreValues(newChoreName.trim());\n\n    // Use manual category if provided, otherwise fallback to prediction\n    const finalCategory = newChoreCategory.trim() ? newChoreCategory.trim() : predictedCategory;\n\n    const newChore: Chore = {\n      id: Math.random().toString(36).substr(2, 9),\n      name: newChoreName.trim(),\n      createdAt: new Date(),\n      category: finalCategory,\n      xp,\n      estMinutes\n    };\n    setChores([...chores, newChore]);\n    setNewChoreName('');\n    setNewChoreCategory('');\n  };\n\n  const handleLogChore = (choreId: string, memberId: string, date: string | null = null) => {\n    const timestamp = date ? new Date(date) : new Date();\n    const newLog: ChoreLog = {\n      id: Math.random().toString(36).substr(2, 9),\n      choreId,\n      memberId,\n      timestamp,\n      isManual: !!date\n    };\n    setLogs([newLog, ...logs]);\n  };\n\n  const handleDeleteItem = (collection: 'members' | 'chores' | 'logs', id: string) => {\n    if (confirm('Are you sure you want to delete this?')) {\n      if (collection === 'members') setMembers(members.filter(m => m.id !== id));\n      if (collection === 'chores') setChores(chores.filter(c => c.id !== id));\n      if (collection === 'logs') setLogs(logs.filter(l => l.id !== id));\n    }\n  };\n\n  const handleExport = () => {\n    const backup = { members, chores, logs };\n    const jsonStr = JSON.stringify(backup, null, 2);\n    setExportJson(jsonStr);\n    navigator.clipboard.writeText(jsonStr).then(() => alert(\"Copied to clipboard!\"));\n  };\n\n  const handleImport = () => {\n    if (!importJson) return;\n    setIsImporting(true);\n    try {\n      const data = JSON.parse(importJson);\n      setMembers(data.members || []);\n      setChores(data.chores || []);\n      setLogs(data.logs || []);\n      alert(\"Import successful!\");\n      setImportJson('');\n    } catch (e) {\n      alert(\"Failed to parse JSON.\");\n    }\n    setIsImporting(false);\n  };\n\n  const handleGithubUpload = async () => {\n    if (!ghToken || !ghRepo || !ghBranch) return alert(\"Please provide Token, Repo Name, and Branch.\");\n    setIsUploading(true);\n\n    try {\n        const headers = { \n            'Authorization': `token ${ghToken}`,\n            'Content-Type': 'application/json',\n            'Accept': 'application/vnd.github.v3+json'\n        };\n\n        // 1. Get User Info\n        const userRes = await fetch('https://api.github.com/user', { headers });\n        if (!userRes.ok) throw new Error(\"Invalid Token\");\n        const user = await userRes.json();\n\n        // 2. Create Repo (ignore if exists)\n        await fetch('https://api.github.com/user/repos', {\n            method: 'POST',\n            headers,\n            body: JSON.stringify({ \n                name: ghRepo, \n                private: true, \n                description: \"Family Chore Tracker Data & App\" \n            })\n        });\n\n        // 3. Ensure Branch Exists\n        const branchCheckRes = await fetch(`https://api.github.com/repos/${user.login}/${ghRepo}/git/ref/heads/${ghBranch}`, { headers });\n        \n        if (branchCheckRes.status === 404) {\n            // Branch does not exist. Create it from default branch.\n            const repoRes = await fetch(`https://api.github.com/repos/${user.login}/${ghRepo}`, { headers });\n            if (!repoRes.ok) throw new Error(\"Could not access repository.\");\n            const repoData = await repoRes.json();\n            const defaultBranch = repoData.default_branch || 'main';\n\n            const refRes = await fetch(`https://api.github.com/repos/${user.login}/${ghRepo}/git/ref/heads/${defaultBranch}`, { headers });\n            if (!refRes.ok) throw new Error(`Could not find default branch: ${defaultBranch}`);\n            const refData = await refRes.json();\n            const sha = refData.object.sha;\n\n            const createBranchRes = await fetch(`https://api.github.com/repos/${user.login}/${ghRepo}/git/refs`, {\n                method: 'POST',\n                headers,\n                body: JSON.stringify({\n                    ref: `refs/heads/${ghBranch}`,\n                    sha: sha\n                })\n            });\n            if (!createBranchRes.ok) throw new Error(`Failed to create branch: ${ghBranch}`);\n        }\n\n        // 4. Prepare Files\n        // CRITICAL FIX: We dynamically generate the content of projectFiles.ts to include\n        // the current PROJECT_FILES array. This ensures projectFiles.ts exists in the repo\n        // so App.tsx can import it during the build process.\n        const projectFilesContent = `export const PROJECT_FILES = ${JSON.stringify(PROJECT_FILES, null, 2)};`;\n\n        const filesToUpload = [\n            ...PROJECT_FILES,\n            {\n                path: 'projectFiles.ts',\n                content: projectFilesContent\n            },\n            { \n                path: 'data_backup.json', \n                content: JSON.stringify({ members, chores, logs }, null, 2) \n            }\n        ];\n\n        // 5. Upload Files\n        for (const file of filesToUpload) {\n            const fileUrl = `https://api.github.com/repos/${user.login}/${ghRepo}/contents/${file.path}?ref=${ghBranch}`;\n            const getRes = await fetch(fileUrl, { headers });\n            let sha = undefined;\n            if (getRes.ok) {\n                const data = await getRes.json();\n                sha = data.sha;\n            }\n\n            const contentEncoded = btoa(unescape(encodeURIComponent(file.content)));\n            \n            const putRes = await fetch(`https://api.github.com/repos/${user.login}/${ghRepo}/contents/${file.path}`, {\n                method: 'PUT',\n                headers,\n                body: JSON.stringify({\n                    message: `Update ${file.path} from App`,\n                    content: contentEncoded,\n                    sha,\n                    branch: ghBranch\n                })\n            });\n            \n            if (!putRes.ok) console.error(`Failed to upload ${file.path}`);\n        }\n\n        alert(`Successfully uploaded to https://github.com/${user.login}/${ghRepo}/tree/${ghBranch}`);\n    } catch (e: any) {\n        alert(\"Upload Failed: \" + e.message);\n        console.error(e);\n    } finally {\n        setIsUploading(false);\n    }\n  };\n\n  /* STATS LOGIC */\n  const getChoreStats = (choreId: string) => {\n    const choreLogs = logs.filter(l => l.choreId === choreId);\n    const total = choreLogs.length;\n    const distribution: DistributionItem[] = members.map(m => {\n      const count = choreLogs.filter(l => l.memberId === m.id).length;\n      return { label: m.name, value: count, color: m.color, id: m.id };\n    }).sort((a, b) => b.value - a.value);\n\n    let streak = { count: 0, memberId: null as string | null };\n    if (choreLogs.length > 0) {\n      const currentHolder = choreLogs[0].memberId;\n      let count = 0;\n      for (let log of choreLogs) {\n        if (log.memberId === currentHolder) count++; else break;\n      }\n      streak = { count, memberId: currentHolder };\n    }\n\n    return { total, distribution, streak };\n  };\n\n  const calculateFunStats = () => {\n    if (logs.length === 0 || members.length === 0) return null;\n\n    const countsByMember: Record<string, number> = {};\n    const countsByHour: Record<number, number> = {};\n    const countsByDay: Record<string, number> = {};\n    const distinctChoresByMember: Record<string, Set<string>> = {};\n    const totalMinutesByMember: Record<string, number> = {};\n    let totalMinutesHouse = 0;\n\n    members.forEach(m => {\n        countsByMember[m.id] = 0;\n        totalMinutesByMember[m.id] = 0;\n        distinctChoresByMember[m.id] = new Set();\n    });\n\n    logs.forEach(log => {\n        const chore = chores.find(c => c.id === log.choreId);\n        const estDuration = chore ? chore.estMinutes || estimateChoreDuration(chore.name) : 10;\n        \n        countsByMember[log.memberId] = (countsByMember[log.memberId] || 0) + 1;\n        totalMinutesByMember[log.memberId] = (totalMinutesByMember[log.memberId] || 0) + estDuration;\n        totalMinutesHouse += estDuration;\n\n        if (log.choreId) distinctChoresByMember[log.memberId]?.add(log.choreId);\n        \n        const d = log.timestamp.toDate ? log.timestamp.toDate() : new Date(log.timestamp);\n        const hour = d.getHours();\n        \n        const dayName = getDayName(d);\n        countsByDay[dayName] = (countsByDay[dayName] || 0) + 1;\n        \n        countsByHour[hour] = (countsByHour[hour] || 0) + 1;\n    });\n\n    const sortedMembers = Object.entries(countsByMember).sort((a,b) => b[1] - a[1]);\n    const leader = members.find(m => m.id === sortedMembers[0]?.[0]);\n\n    const nightLogs = logs.filter(l => getHour(l.timestamp) >= 21);\n    const nightCounts: Record<string, number> = {};\n    nightLogs.forEach(l => nightCounts[l.memberId] = (nightCounts[l.memberId] || 0) + 1);\n    const nightOwlEntry = Object.entries(nightCounts).sort((a,b) => b[1] - a[1])[0];\n    const nightOwl = members.find(m => m.id === nightOwlEntry?.[0]);\n\n    const morningLogs = logs.filter(l => getHour(l.timestamp) <= 8);\n    const morningCounts: Record<string, number> = {};\n    morningLogs.forEach(l => morningCounts[l.memberId] = (morningCounts[l.memberId] || 0) + 1);\n    const earlyBirdEntry = Object.entries(morningCounts).sort((a,b) => b[1] - a[1])[0];\n    const earlyBird = members.find(m => m.id === earlyBirdEntry?.[0]);\n\n    const weekendLogs = logs.filter(l => {\n        const d = l.timestamp.toDate ? l.timestamp.toDate() : new Date(l.timestamp);\n        return d.getDay() === 0 || d.getDay() === 6;\n    });\n    const weekendCounts: Record<string, number> = {};\n    weekendLogs.forEach(l => weekendCounts[l.memberId] = (weekendCounts[l.memberId] || 0) + 1);\n    const warriorEntry = Object.entries(weekendCounts).sort((a,b) => b[1] - a[1])[0];\n    const weekendWarrior = members.find(m => m.id === warriorEntry?.[0]);\n\n    const varietySorted = Object.entries(distinctChoresByMember).sort((a,b) => b[1].size - a[1].size);\n    const varietyWinner = members.find(m => m.id === varietySorted[0]?.[0]);\n    \n    const busiestDayEntry = Object.entries(countsByDay).sort((a,b) => b[1] - a[1])[0];\n    const totalChores = logs.length;\n\n    let specialist = null;\n    let maxSpecialization = 0;\n    members.forEach(m => {\n        const myLogs = logs.filter(l => l.memberId === m.id);\n        if (myLogs.length > 5) {\n            const myChoreCounts: Record<string, number> = {};\n            myLogs.forEach(l => myChoreCounts[l.choreId] = (myChoreCounts[l.choreId] || 0) + 1);\n            const maxSingleChore = Math.max(...Object.values(myChoreCounts));\n            const ratio = maxSingleChore / myLogs.length;\n            if (ratio > maxSpecialization) {\n                maxSpecialization = ratio;\n                specialist = m;\n            }\n        }\n    });\n\n    const sortedTime = Object.entries(totalMinutesByMember).sort((a,b) => b[1] - a[1]);\n    const timeLord = members.find(m => m.id === sortedTime[0]?.[0]);\n    const timeLordMinutes = sortedTime[0]?.[1] || 0;\n\n    const didYouKnows: string[] = [];\n    \n    const caloriesBurned = Math.round(totalMinutesHouse * 4.5);\n    didYouKnows.push(`Did you know? The family has burned approximately ${caloriesBurned} calories doing chores. That's about ${Math.round(caloriesBurned/285)} slices of pizza!`);\n\n    const wageValue = (totalMinutesHouse / 60) * 15;\n    didYouKnows.push(`Did you know? If you hired a professional at $15/hr, this work would have cost $${wageValue.toFixed(2)}.`);\n\n    const moviesWatched = (totalMinutesHouse / 120).toFixed(1);\n    didYouKnows.push(`Did you know? You could have watched ${moviesWatched} full-length movies in the time spent cleaning.`);\n\n    if (members.length >= 2) {\n        const top = members.find(m => m.id === sortedMembers[0][0]);\n        const second = members.find(m => m.id === sortedMembers[1][0]);\n        if(top && second) {\n            const pct = Math.round(((countsByMember[top.id] - countsByMember[second.id]) / countsByMember[second.id]) * 100);\n            if (pct > 0) didYouKnows.push(`Did you know? ${top.name} is currently ${pct}% more productive than ${second.name}.`);\n        }\n    }\n\n    chores.forEach(c => {\n        const cLogs = logs.filter(l => l.choreId === c.id);\n        if (cLogs.length > 5) {\n            const cCounts: Record<string, number> = {};\n            cLogs.forEach(l => cCounts[l.memberId] = (cCounts[l.memberId]||0)+1);\n            const ownerId = Object.keys(cCounts).reduce((a, b) => cCounts[a] > cCounts[b] ? a : b);\n            const owner = members.find(m => m.id === ownerId);\n            const pct = Math.round((cCounts[ownerId] / cLogs.length) * 100);\n            if (pct > 60 && owner) {\n                didYouKnows.push(`Did you know? ${owner.name} basically owns the \"${c.name}\" task, doing ${pct}% of the work.`);\n            }\n        }\n    });\n\n    if (timeLord) {\n        didYouKnows.push(`Did you know? ${timeLord.name} has spent roughly ${(timeLordMinutes/60).toFixed(1)} hours working. Give them a break!`);\n    }\n\n    const weeksActive = Math.max(1, (new Date().getTime() - new Date(logs[logs.length-1]?.timestamp || new Date()).getTime()) / (1000 * 3600 * 24 * 7));\n    const avgPerWeek = Math.round(logs.length / weeksActive);\n    didYouKnows.push(`Did you know? The household averages ${avgPerWeek} tasks per week.`);\n\n    const busyHour = Object.entries(countsByHour).sort((a,b) => b[1] - a[1])[0];\n    if(busyHour) {\n        const hourInt = parseInt(busyHour[0]);\n        const ampm = hourInt >= 12 ? 'PM' : 'AM';\n        const displayHour = hourInt % 12 || 12;\n        didYouKnows.push(`Did you know? The most productive time of day is around ${displayHour} ${ampm}.`);\n    }\n\n    const shuffledFacts = didYouKnows.sort(() => 0.5 - Math.random()).slice(0, 10);\n\n    return {\n        leader,\n        nightOwl,\n        earlyBird,\n        weekendWarrior,\n        varietyWinner,\n        busiestDay: busiestDayEntry ? busiestDayEntry[0] : 'None',\n        totalChores,\n        specialist,\n        specialistRatio: Math.round(maxSpecialization * 100),\n        sortedMembers,\n        timeLord,\n        totalMinutesHouse,\n        shuffledFacts,\n        sortedTime\n    };\n  };\n\n  /* RENDER HELPERS */\n  const renderDashboard = () => {\n    const totalLogs = logs.length;\n    const overallDistribution: DistributionItem[] = members.map(m => {\n        const count = logs.filter(l => l.memberId === m.id).length;\n        return { label: m.name, value: count, color: m.color, id: m.id };\n    }).sort((a, b) => b.value - a.value);\n\n    // Calculate Total Household XP\n    const totalHouseholdXP = logs.reduce((acc, log) => {\n        const chore = chores.find(c => c.id === log.choreId);\n        // Robust fallback if chore deleted or old data\n        const xp = chore?.xp || (chore ? predictChoreValues(chore.name).xp : 0);\n        return acc + xp;\n    }, 0);\n\n    const sevenDaysAgo = new Date(); \n    sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);\n    const recentLogs = logs.filter(l => new Date(l.timestamp) >= sevenDaysAgo);\n    \n    const mvpCounts: Record<string, number> = {};\n    recentLogs.forEach(l => { mvpCounts[l.memberId] = (mvpCounts[l.memberId] || 0) + 1; });\n    \n    let weeklyMvp: Member | undefined; \n    let maxCount = -1;\n    Object.keys(mvpCounts).forEach(mId => {\n        if (mvpCounts[mId] > maxCount) { \n          maxCount = mvpCounts[mId]; \n          weeklyMvp = members.find(m => m.id === mId); \n        }\n    });\n\n    const getXPColor = (xp: number) => {\n        if (xp < 200) return 'bg-emerald-500/10 text-emerald-500 border-emerald-500/20';\n        if (xp < 400) return 'bg-yellow-500/10 text-yellow-500 border-yellow-500/20';\n        return 'bg-purple-500/10 text-purple-500 border-purple-500/20';\n    };\n\n    // Sort chores: Group by Category (alphabetical), then by Name (alphabetical)\n    // Categories like 'Kitchen', 'General' etc will group together.\n    const sortedChores = [...chores].sort((a, b) => {\n        const catA = a.category || 'ZZZ'; // Undefined categories go to the end\n        const catB = b.category || 'ZZZ';\n        const catCompare = catA.localeCompare(catB);\n        if (catCompare !== 0) return catCompare;\n        return a.name.localeCompare(b.name);\n    });\n\n    return (\n      <div className=\"space-y-6\">\n        <header className=\"flex justify-between items-center mb-6\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-white tracking-tight\">Family Tracker</h1>\n            <p className=\"text-gray-400 text-xs font-medium\">Household Performance</p>\n          </div>\n          <div className=\"flex gap-2\">\n            <button onClick={() => setView('stats')} className=\"p-2.5 bg-gray-800 rounded-full hover:bg-gray-700 text-purple-400 transition-colors shadow-lg shadow-purple-900/20 group\"> \n                <Trophy size={20} className=\"group-hover:scale-110 transition-transform\" /> \n            </button>\n            <button onClick={() => setView('settings')} className=\"p-2.5 bg-gray-800 rounded-full hover:bg-gray-700 text-gray-400 transition-colors\"> <Settings size={20} /> </button>\n          </div>\n        </header>\n\n        {/* Database Control */}\n        <div className=\"bg-black/40 border border-gray-800 p-4 rounded-xl mb-6 flex flex-col gap-3\">\n           <div className=\"flex items-center gap-2 text-[10px] text-gray-500 uppercase tracking-widest font-black\">\n              <Database size={12} className=\"text-blue-500\" /> Environment Configuration\n           </div>\n           <div className=\"flex gap-2\">\n              <input \n                  type=\"text\" \n                  value={manualAppId}\n                  onChange={(e) => setManualAppId(e.target.value)}\n                  className=\"flex-1 bg-gray-900 border border-gray-700 text-white text-xs px-3 py-2 rounded-lg font-mono focus:border-blue-500 outline-none transition-all\"\n                  placeholder={`Active ID: ${appId}`}\n              />\n           </div>\n        </div>\n\n        {/* Household Level Progress */}\n        <HouseholdLevel totalXP={totalHouseholdXP} />\n\n        {members.length === 0 && (\n          <div className=\"bg-blue-900/20 border border-blue-800/50 p-8 rounded-2xl mb-6 text-center animate-pulse\">\n            <h3 className=\"text-blue-300 font-bold text-lg flex items-center justify-center gap-2 mb-2\">\n              <Users size={20} /> Welcome Home\n            </h3>\n            <p className=\"text-blue-200/60 text-sm mb-5\">\n              Ready to organize your family? Start by adding your first family member in settings.\n            </p>\n            <button onClick={() => setView('settings')} className=\"px-8 py-2.5 bg-blue-600 hover:bg-blue-500 rounded-xl text-sm font-bold text-white transition-all shadow-lg shadow-blue-900/20\">\n              Get Started\n            </button>\n          </div>\n        )}\n\n        {members.length > 0 && (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-5 mb-8\">\n              <div className=\"bg-gray-800/40 border border-gray-800 rounded-2xl p-5 flex flex-col items-center justify-between min-h-[190px]\">\n                  <h3 className=\"text-[10px] font-black text-gray-500 uppercase tracking-widest w-full text-center mb-3\">Overall Distribution</h3>\n                  <DonutChart data={overallDistribution} total={totalLogs} />\n              </div>\n              <div className=\"bg-gray-800/40 border border-gray-800 rounded-2xl p-5 md:col-span-2 flex flex-col min-h-[190px]\">\n                   <div className=\"flex justify-between items-start\">\n                      <h3 className=\"text-[10px] font-black text-gray-500 uppercase tracking-widest\">Activity Log</h3>\n                      {weeklyMvp && (\n                           <div className=\"flex items-center gap-2 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20\">\n                               <Award size={14} className=\"text-yellow-500\" />\n                               <span className=\"text-[10px] font-bold text-yellow-500 uppercase\">Weekly MVP: {weeklyMvp.name}</span>\n                           </div>\n                      )}\n                   </div>\n                   <div className=\"flex-1 flex items-end\">\n                       <WeeklyActivityGraph logs={logs} />\n                   </div>\n              </div>\n          </div>\n        )}\n\n        {/* Chores Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          {sortedChores.map(chore => {\n            const stats = getChoreStats(chore.id);\n            const lastLog = logs.find(l => l.choreId === chore.id);\n            const lastMember = lastLog ? members.find(m => m.id === lastLog.memberId) : null;\n            \n            // XP Badge Logic\n            const xp = chore.xp || predictChoreValues(chore.name).xp;\n            const badgeColor = getXPColor(xp);\n\n            return (\n              <div \n                key={chore.id}\n                onClick={() => { setActiveChoreId(chore.id); setView('chore_detail'); }}\n                className=\"bg-gray-800/30 hover:bg-gray-800/60 border border-gray-800 rounded-2xl p-6 cursor-pointer transition-all hover:scale-[1.02] active:scale-[0.98] group\"\n              >\n                <div className=\"flex justify-between items-start\">\n                  <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-[8px] font-bold uppercase tracking-wider text-gray-500\">{chore.category || 'General'}</span>\n                      </div>\n                      <h3 className=\"text-lg font-bold text-white group-hover:text-blue-400 transition-colors\">{chore.name}</h3>\n                      <div className=\"flex items-center gap-2 mt-1\">\n                          <span className={`text-[10px] font-black px-2 py-0.5 rounded border ${badgeColor}`}>\n                              +{Math.round(xp)} XP\n                          </span>\n                          {stats.streak.count >= 3 && (\n                             <div className=\"bg-orange-500/10 text-orange-500 px-2 py-0.5 rounded text-[10px] font-black flex items-center gap-1 border border-orange-500/20\">\n                               <Flame size={10} /> {stats.streak.count}X\n                             </div>\n                          )}\n                      </div>\n                  </div>\n                </div>\n                <div className=\"mt-5\">\n                  <div className=\"flex justify-between text-[10px] font-bold text-gray-500 uppercase mb-2\">\n                    <span>Workload</span> <span>{stats.total} Completions</span>\n                  </div>\n                  <DistributionBar data={stats.distribution} total={stats.total} />\n                </div>\n                <div className=\"mt-5 flex items-center gap-2 text-xs text-gray-500\">\n                  <Clock size={14} className=\"text-gray-600\" />\n                  {lastLog ? ( \n                    <span> Done by <span className=\"text-white font-semibold\">{lastMember?.name || 'Unknown'}</span> {getRelativeTime(lastLog.timestamp)} </span> \n                  ) : ( \n                    <span className=\"italic\">Never completed</span> \n                  )}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n        \n        {/* Global Summary Stats at the bottom as requested */}\n        {logs.length > 5 && (\n            <div className=\"mt-12 pt-8 border-t border-gray-800\">\n                <h3 className=\"text-gray-500 font-bold text-sm mb-6 flex items-center gap-2\"><ChartColumn size={18}/> Household Pulse</h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <VerticalBarChart data={overallDistribution} title=\"All-Time Leaderboard (Count)\" />\n                    <div className=\"grid grid-cols-2 gap-4\">\n                        <StatCard icon={<CheckCircle size={16} />} title=\"Total Chores\" value={logs.length} subtext=\"Lifetime completions\" colorClass=\"text-blue-400\" />\n                        <StatCard icon={<Users size={16} />} title=\"Family Size\" value={members.length} subtext=\"Active members\" colorClass=\"text-purple-400\" />\n                        <StatCard icon={<Award size={16} />} title=\"Avg Daily\" value={Math.round(logs.length / Math.max(1, (new Date().getTime() - new Date(logs[logs.length-1]?.timestamp || new Date()).getTime()) / (1000 * 3600 * 24)))} subtext=\"Tasks per day\" colorClass=\"text-emerald-400\" />\n                        <StatCard icon={<Target size={16} />} title=\"Active Chores\" value={chores.length} subtext=\"In rotation\" colorClass=\"text-orange-400\" />\n                    </div>\n                </div>\n            </div>\n        )}\n      </div>\n    );\n  };\n\n  const renderChoreDetail = () => {\n    const chore = chores.find(c => c.id === activeChoreId);\n    if (!chore) return null;\n    const stats = getChoreStats(chore.id);\n    const choreLogs = logs.filter(l => l.choreId === chore.id);\n    \n    // Day of week breakdown for this chore\n    const dayCounts: Record<string, number> = {};\n    choreLogs.forEach(l => {\n        const d = getDayName(l.timestamp);\n        dayCounts[d] = (dayCounts[d] || 0) + 1;\n    });\n    const busiestDay = Object.entries(dayCounts).sort((a,b) => b[1] - a[1])[0];\n\n    // Estimated time per person\n    const estTime = estimateChoreDuration(chore.name);\n    const timeSpent: Record<string, number> = {};\n    choreLogs.forEach(l => {\n        timeSpent[l.memberId] = (timeSpent[l.memberId] || 0) + estTime;\n    });\n\n    return (\n      <div className=\"space-y-6\">\n        <header className=\"flex items-center gap-4 mb-2\">\n          <button onClick={() => setView('dashboard')} className=\"p-2.5 hover:bg-gray-800 rounded-full text-gray-400 transition-all\"> <ArrowLeft size={24} /> </button>\n          <h1 className=\"text-2xl font-bold text-white\">{chore.name}</h1>\n        </header>\n\n        <section className=\"bg-gray-800/40 border border-gray-800 rounded-3xl p-6\">\n          <h2 className=\"text-[10px] font-black tracking-widest text-gray-500 mb-6 uppercase\">Quick Log Completion</h2>\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-3\">\n            {members.map(member => {\n                const memberLogCount = choreLogs.filter(l => l.memberId === member.id).length;\n                return (\n                  <button\n                    key={member.id}\n                    onClick={() => handleLogChore(chore.id, member.id)}\n                    className=\"group relative overflow-hidden bg-gray-900 hover:bg-blue-600 border border-gray-800 hover:border-blue-500 rounded-2xl p-5 transition-all duration-300 flex flex-col items-center gap-3\"\n                  >\n                    <div className=\"w-12 h-12 rounded-2xl flex items-center justify-center text-xl font-black text-white shadow-xl transition-transform group-hover:scale-110\" style={{ backgroundColor: member.color }}> \n                      {member.name.charAt(0)} \n                    </div>\n                    <div className=\"w-full text-center\">\n                        <span className=\"font-bold text-gray-300 group-hover:text-white transition-colors\">{member.name}</span>\n                        {/* Sparkline for specific chore contribution */}\n                        <div className=\"mt-1 opacity-60 group-hover:opacity-100\">\n                            <MiniContributionBar value={memberLogCount} total={stats.total} color={member.color} />\n                        </div>\n                    </div>\n                  </button>\n                );\n            })}\n          </div>\n          <div className=\"mt-8 pt-6 border-t border-gray-800\">\n            <details className=\"text-sm text-gray-500 group\">\n              <summary className=\"cursor-pointer hover:text-white flex items-center gap-2 transition-colors\"> <Calendar size={14} /> Log historical task </summary>\n              <div className=\"mt-4 flex flex-col sm:flex-row gap-3 p-4 bg-gray-900 rounded-2xl border border-gray-800\">\n                <input type=\"datetime-local\" className=\"flex-1 bg-gray-800 border border-gray-700 text-white rounded-xl px-4 py-2.5 text-sm outline-none focus:border-blue-500\" onChange={(e) => setManualDate(e.target.value)} />\n                <select className=\"flex-1 bg-gray-800 border border-gray-700 text-white rounded-xl px-4 py-2.5 text-sm outline-none focus:border-blue-500\" onChange={(e) => { if(e.target.value) { handleLogChore(chore.id, e.target.value, manualDate); setManualDate(''); } }} defaultValue=\"\" >\n                  <option value=\"\" disabled>Select Member</option>\n                  {members.map(m => <option key={m.id} value={m.id}>{m.name}</option>)}\n                </select>\n              </div>\n            </details>\n          </div>\n        </section>\n\n        {/* VISUALS SECTION */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n             <section className=\"bg-gray-800/40 border border-gray-800 p-6 rounded-2xl flex flex-col h-full\">\n                 <h3 className=\"text-gray-500 text-[10px] font-black uppercase mb-6 flex items-center gap-2\"> <PieChart size={14} className=\"text-purple-500\" /> Member Share </h3>\n                 <div className=\"flex-1 flex flex-col justify-center\">\n                    <DistributionBar data={stats.distribution} total={stats.total} />\n                    <div className=\"mt-6 space-y-3\">\n                        {stats.distribution.map(d => (\n                            <div key={d.id} className=\"flex items-center justify-between text-xs text-gray-400\">\n                                <div className=\"flex items-center gap-2\">\n                                    <div className=\"w-2 h-2 rounded-full\" style={{backgroundColor: d.color}}></div>\n                                    <span className=\"font-medium text-gray-300\">{d.label}</span>\n                                </div>\n                                <span className=\"font-mono\">{Math.round((d.value/stats.total)*100 || 0)}% ({d.value})</span>\n                            </div>\n                        ))}\n                    </div>\n                 </div>\n             </section>\n\n             <section className=\"bg-gray-800/40 border border-gray-800 p-6 rounded-2xl flex flex-col h-full\">\n                 <h3 className=\"text-gray-500 text-[10px] font-black uppercase mb-6 flex items-center gap-2\"> <Activity size={14} className=\"text-blue-500\" /> 7-Day Trend </h3>\n                 <div className=\"flex-1 flex items-end min-h-[150px]\">\n                    <WeeklyActivityGraph logs={choreLogs} />\n                 </div>\n                 <div className=\"flex justify-between items-center mt-4 pt-4 border-t border-gray-800/50\">\n                     <div>\n                        <span className=\"text-[10px] text-gray-500 font-bold uppercase tracking-widest block\">Most Active Day</span>\n                        <span className=\"text-xs font-bold text-white\">{busiestDay ? busiestDay[0] : 'N/A'}</span>\n                     </div>\n                     <div className=\"text-right\">\n                        <span className=\"text-[10px] text-gray-500 font-bold uppercase tracking-widest block\">Est. Time Spent</span>\n                        <span className=\"text-xs font-bold text-blue-400\">{(stats.total * estTime / 60).toFixed(1)} Hours</span>\n                     </div>\n                 </div>\n             </section>\n        </div>\n\n        {/* FULL HISTORY SECTION */}\n        <section className=\"mt-8\">\n            <div className=\"flex items-center justify-between mb-5\">\n                <h3 className=\"text-white font-bold flex items-center gap-2\"> <Clock size={20} className=\"text-gray-400\"/> Full History </h3>\n                <span className=\"text-xs font-bold text-gray-500 bg-gray-900 px-3 py-1 rounded-full border border-gray-800\">{choreLogs.length} Records</span>\n            </div>\n            \n            <div className=\"bg-gray-900/40 rounded-3xl overflow-hidden border border-gray-800\">\n                <div className=\"overflow-y-auto max-h-[600px] scrollbar-hide\">\n                    {choreLogs.length === 0 ? (\n                    <div className=\"p-10 text-center text-gray-600 italic\">No activity yet.</div>\n                    ) : (\n                    choreLogs.map((log, idx) => {\n                        const member = members.find(m => m.id === log.memberId);\n                        return (\n                            <div key={log.id} className={`p-4 flex items-center justify-between hover:bg-gray-800/20 transition-colors ${idx !== choreLogs.length - 1 ? 'border-b border-gray-800' : ''}`}>\n                                <div className=\"flex items-center gap-4\">\n                                    <div className=\"w-10 h-10 rounded-xl flex items-center justify-center text-xs font-black text-white shadow-lg\" style={{ backgroundColor: member?.color || '#333' }}> {member?.name.charAt(0)} </div>\n                                    <div>\n                                        <div className=\"text-sm font-bold text-white\">{member?.name || 'Unknown User'}</div>\n                                        <div className=\"text-[10px] font-bold text-gray-500 uppercase flex items-center gap-2\"> \n                                            {formatDate(log.timestamp)} \n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"flex items-center gap-3\">\n                                    {log.isManual && <span className=\"hidden sm:inline-block text-[8px] font-black bg-gray-800 text-gray-400 px-2 py-1 rounded uppercase tracking-wider border border-gray-700\">Manual</span>}\n                                    <button onClick={() => handleDeleteItem('logs', log.id)} className=\"text-gray-600 hover:text-red-500 p-2 transition-colors rounded-lg hover:bg-gray-800\"> <Trash size={16} /> </button>\n                                </div>\n                            </div>\n                        );\n                    })\n                    )}\n                </div>\n            </div>\n        </section>\n      </div>\n    );\n  };\n\n  const renderStats = () => {\n    const funStats = calculateFunStats();\n    if (!funStats) return (\n        <div className=\"flex flex-col items-center justify-center min-h-[50vh] text-center p-8\">\n            <Trophy size={48} className=\"text-gray-700 mb-4\" />\n            <h2 className=\"text-xl font-bold text-white\">Not Enough Data</h2>\n            <p className=\"text-gray-500 text-sm mt-2\">Log some chores to unlock the hall of fame!</p>\n            <button onClick={() => setView('dashboard')} className=\"mt-6 px-6 py-2 bg-blue-600 rounded-lg text-white font-bold\">Back Home</button>\n        </div>\n    );\n\n    const leaderboardData = funStats.sortedMembers.map(([id, count]) => {\n        const m = members.find(mem => mem.id === id);\n        return { label: m?.name || 'Unknown', value: count, color: m?.color || '#333', id };\n    });\n\n    // XP Leaderboard\n    const xpByMember: Record<string, number> = {};\n    members.forEach(m => xpByMember[m.id] = 0);\n    logs.forEach(log => {\n        const chore = chores.find(c => c.id === log.choreId);\n        // Fallback for XP if not found on chore object\n        const xp = chore?.xp || (chore ? predictChoreValues(chore.name).xp : 0);\n        if (xpByMember[log.memberId] !== undefined) {\n            xpByMember[log.memberId] += xp;\n        }\n    });\n    \n    const xpLeaderboardData = members.map(m => ({\n        label: m.name,\n        value: Math.round(xpByMember[m.id]),\n        color: m.color,\n        id: m.id\n    })).sort((a,b) => b.value - a.value);\n\n    // Time Leaderboard\n    const timeData = funStats.sortedTime.map(([id, mins]) => {\n        const m = members.find(mem => mem.id === id);\n        return { label: m?.name || 'Unknown', value: Math.round(mins/60*10)/10, color: m?.color || '#333', id };\n    });\n\n    return (\n        <div className=\"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500\">\n            <header className=\"flex items-center gap-4 mb-8\">\n                <button onClick={() => setView('dashboard')} className=\"p-2.5 hover:bg-gray-800 rounded-full text-gray-400 transition-all\"> <ArrowLeft size={24} /> </button>\n                <div>\n                    <h1 className=\"text-2xl font-bold text-white tracking-tight flex items-center gap-2\"><Trophy className=\"text-yellow-500\" /> Hall of Fame</h1>\n                    <p className=\"text-gray-500 text-xs font-medium\">Fun facts and competitive stats</p>\n                </div>\n            </header>\n\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                 <StatCard \n                    icon={<Crown size={20} />} \n                    title=\"The Leader\" \n                    value={funStats.leader?.name || '-'} \n                    subtext=\"Most chores done\" \n                    colorClass=\"text-yellow-400 bg-yellow-400/10\" \n                 />\n                 <StatCard \n                    icon={<Hourglass size={20} />} \n                    title=\"The Time Lord\" \n                    value={funStats.timeLord?.name || '-'} \n                    subtext=\"Most time spent\" \n                    colorClass=\"text-pink-400 bg-pink-400/10\" \n                 />\n                 <StatCard \n                    icon={<Moon size={20} />} \n                    title=\"Night Owl\" \n                    value={funStats.nightOwl?.name || '-'} \n                    subtext=\"Most active after 9PM\" \n                    colorClass=\"text-purple-400 bg-purple-400/10\" \n                 />\n                 <StatCard \n                    icon={<Sun size={20} />} \n                    title=\"Early Bird\" \n                    value={funStats.earlyBird?.name || '-'} \n                    subtext=\"Most active before 8AM\" \n                    colorClass=\"text-orange-400 bg-orange-400/10\" \n                 />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <VerticalBarChart data={xpLeaderboardData} title=\"XP Leaderboard (Total Points)\" />\n                <VerticalBarChart data={leaderboardData} title=\"Task Count Leaderboard\" />\n            </div>\n            \n            <div className=\"grid grid-cols-1\">\n                <VerticalBarChart data={timeData} title=\"Hours Worked Leaderboard\" />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                <div className=\"md:col-span-2 space-y-6\">\n                    <div className=\"p-5 bg-gray-900/40 border border-gray-800 rounded-2xl\">\n                        <h3 className=\"text-[10px] font-black uppercase tracking-widest text-gray-500 mb-4 flex items-center gap-2\"><ChartColumn size={14}/> Daily Volume (Last 7 Days)</h3>\n                        <DayOfWeekChart logs={logs} />\n                    </div>\n                    <DayOfWeekChart logs={logs} />\n                </div>\n                <div className=\"grid grid-cols-1 gap-4\">\n                    <StatCard \n                        icon={<Zap size={20} />} \n                        title=\"Busiest Day\" \n                        value={funStats.busiestDay} \n                        subtext=\"Peak activity\" \n                        colorClass=\"text-red-400\" \n                        className=\"h-full justify-center\"\n                    />\n                    <StatCard \n                        icon={<Coffee size={20} />} \n                        title=\"Weekend Warrior\" \n                        value={funStats.weekendWarrior?.name || '-'} \n                        subtext=\"Most active Sat/Sun\" \n                        colorClass=\"text-blue-400 bg-blue-400/10\" \n                        className=\"h-full justify-center\"\n                    />\n                </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                 <StatCard \n                    icon={<CheckCircle size={20} />} \n                    title=\"Total Completed\" \n                    value={funStats.totalChores} \n                    subtext=\"Household Total\" \n                    colorClass=\"text-emerald-400\" \n                 />\n                 <StatCard \n                    icon={<Clock size={20} />} \n                    title=\"Hours Logged\" \n                    value={Math.round(funStats.totalMinutesHouse / 60)} \n                    subtext=\"Estimated Total\" \n                    colorClass=\"text-teal-400\" \n                 />\n                <StatCard \n                    icon={<Target size={20} />} \n                    title=\"The Specialist\" \n                    value={funStats.specialist?.name || '-'} \n                    subtext={`${funStats.specialistRatio}% on one chore`} \n                    colorClass=\"text-indigo-400\" \n                />\n                <StatCard \n                    icon={<TrendingUp size={20} />} \n                    title=\"Variety Award\" \n                    value={funStats.varietyWinner?.name || '-'} \n                    subtext=\"Most diverse tasks\" \n                    colorClass=\"text-cyan-400\" \n                />\n            </div>\n            \n            <section className=\"pt-6 border-t border-gray-800\">\n                <h3 className=\"text-white font-bold mb-4 flex items-center gap-2\"><Lightbulb className=\"text-yellow-300\" size={20}/> Did You Know?</h3>\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                    {funStats.shuffledFacts.map((fact, i) => (\n                        <div key={i} className=\"bg-gray-800/40 p-4 rounded-xl border border-gray-800 text-xs text-gray-400 flex gap-3 items-start hover:bg-gray-800/60 transition-colors\">\n                            <div className=\"mt-0.5 min-w-[16px]\"><Lightbulb size={14} className=\"text-yellow-500/50\" /></div>\n                            <p>{fact}</p>\n                        </div>\n                    ))}\n                </div>\n            </section>\n\n            <div className=\"p-6 bg-gradient-to-r from-blue-900/20 to-purple-900/20 rounded-2xl border border-blue-500/20 text-center\">\n                <h3 className=\"text-blue-300 font-bold mb-2\">Keep it up!</h3>\n                <p className=\"text-sm text-gray-400 max-w-md mx-auto\">Tracking these stats helps balance the load and makes chores a little less boring. The current leader is <span className=\"text-white font-bold\">{funStats.leader?.name}</span>!</p>\n            </div>\n        </div>\n    );\n  };\n\n  const renderSettings = () => (\n    <div className=\"space-y-8 max-w-xl mx-auto\">\n      <header className=\"flex items-center gap-4 mb-8\">\n          <button onClick={() => setView('dashboard')} className=\"p-2.5 hover:bg-gray-800 rounded-full text-gray-400\"> <ArrowLeft size={24} /> </button>\n          <h1 className=\"text-2xl font-bold text-white tracking-tight\">Management</h1>\n      </header>\n\n      {/* Members Section */}\n      <section className=\"bg-gray-800/40 border border-gray-800 rounded-3xl p-6\">\n        <h2 className=\"text-sm font-black text-gray-400 uppercase tracking-widest mb-6 flex items-center gap-2\"> <Users size={20} className=\"text-blue-500\" /> Family Roster </h2>\n        <form onSubmit={handleAddMember} className=\"flex gap-3 mb-6\">\n          <input type=\"text\" placeholder=\"Member Name\" className=\"flex-1 bg-gray-900 border border-gray-800 text-white rounded-2xl px-5 py-3 focus:border-blue-500 outline-none transition-all placeholder:text-gray-700\" value={newMemberName} onChange={(e) => setNewMemberName(e.target.value)} />\n          <button type=\"submit\" className=\"bg-blue-600 hover:bg-blue-500 text-white px-8 py-3 rounded-2xl font-bold transition-all shadow-lg shadow-blue-900/20\"> Add </button>\n        </form>\n        <div className=\"space-y-2\">\n            {members.map(member => (\n            <div key={member.id} className=\"flex justify-between items-center bg-gray-900/40 p-4 rounded-2xl border border-gray-800 group hover:border-blue-500/30 transition-all\">\n                <div className=\"flex items-center gap-4\">\n                <div className=\"w-8 h-8 rounded-xl shadow-lg\" style={{ backgroundColor: member.color }}></div>\n                <span className=\"text-gray-200 font-bold\">{member.name}</span>\n                </div>\n                <button onClick={() => handleDeleteItem('members', member.id)} className=\"text-gray-700 hover:text-red-500 transition-colors p-2\"> <Trash size={18} /> </button>\n            </div>\n            ))}\n        </div>\n      </section>\n\n      {/* Chores Section */}\n      <section className=\"bg-gray-800/40 border border-gray-800 rounded-3xl p-6\">\n        <h2 className=\"text-sm font-black text-gray-400 uppercase tracking-widest mb-6 flex items-center gap-2\"> <CheckCircle size={20} className=\"text-emerald-500\" /> Task Library </h2>\n        <form onSubmit={handleAddChore} className=\"flex flex-col sm:flex-row gap-3 mb-6\">\n          <div className=\"flex-1 flex gap-3\">\n            <input \n                type=\"text\" \n                placeholder=\"Task Name (e.g. Vacuum)\" \n                className=\"flex-[2] bg-gray-900 border border-gray-800 text-white rounded-2xl px-5 py-3 focus:border-emerald-500 outline-none transition-all placeholder:text-gray-700\" \n                value={newChoreName} \n                onChange={(e) => setNewChoreName(e.target.value)} \n            />\n            <input \n                type=\"text\" \n                placeholder=\"Category\" \n                className=\"flex-1 bg-gray-900 border border-gray-800 text-white rounded-2xl px-5 py-3 focus:border-emerald-500 outline-none transition-all placeholder:text-gray-700\" \n                value={newChoreCategory} \n                onChange={(e) => setNewChoreCategory(e.target.value)} \n                list=\"category-suggestions\"\n            />\n            <datalist id=\"category-suggestions\">\n                <option value=\"Kitchen\" />\n                <option value=\"Bathroom\" />\n                <option value=\"Living Room\" />\n                <option value=\"Bedroom\" />\n                <option value=\"Outdoor\" />\n                <option value=\"Pets\" />\n            </datalist>\n          </div>\n          <button type=\"submit\" className=\"bg-emerald-600 hover:bg-emerald-500 text-white px-8 py-3 rounded-2xl font-bold transition-all shadow-lg shadow-emerald-900/20\"> Add </button>\n        </form>\n        <div className=\"space-y-2\">\n            {chores.map(chore => (\n            <div key={chore.id} className=\"flex justify-between items-center bg-gray-900/40 p-4 rounded-2xl border border-gray-800 group hover:border-emerald-500/30 transition-all\">\n                <div className=\"flex flex-col\">\n                    <span className=\"text-gray-200 font-bold\">{chore.name}</span>\n                    <span className=\"text-[10px] text-gray-500 font-bold uppercase tracking-wider\">{chore.category}</span>\n                </div>\n                <button onClick={() => handleDeleteItem('chores', chore.id)} className=\"text-gray-700 hover:text-red-500 transition-colors p-2\"> <Trash size={18} /> </button>\n            </div>\n            ))}\n        </div>\n      </section>\n\n      {/* GitHub Integration */}\n      <section className=\"bg-gray-800/40 border border-gray-800 rounded-3xl p-6\">\n         <h2 className=\"text-sm font-black text-gray-400 uppercase tracking-widest mb-6 flex items-center gap-2\"> <Github size={20} className=\"text-white\" /> GitHub Integration </h2>\n         \n         <div className=\"bg-gray-900/60 p-6 rounded-2xl border border-gray-800 space-y-4\">\n             <div className=\"flex flex-col gap-1\">\n                 <label className=\"text-[10px] uppercase font-bold text-gray-500\">Personal Access Token (Repo Scope)</label>\n                 <div className=\"relative\">\n                    <input \n                        type={showGhToken ? \"text\" : \"password\"}\n                        placeholder=\"ghp_xxxxxxxxxxxx\" \n                        className=\"w-full bg-black/40 border border-gray-800 rounded-xl px-4 py-3 text-sm text-white focus:border-white outline-none font-mono pr-20\"\n                        value={ghToken}\n                        onChange={(e) => setGhToken(e.target.value)}\n                        autoComplete=\"off\"\n                        spellCheck=\"false\"\n                    />\n                    <div className=\"absolute right-2 top-1/2 -translate-y-1/2 flex gap-1\">\n                        <button \n                            onClick={async () => {\n                                try {\n                                    const text = await navigator.clipboard.readText();\n                                    setGhToken(text);\n                                } catch (err) {\n                                    alert(\"Clipboard access denied. Please type manually.\");\n                                }\n                            }}\n                            className=\"p-1.5 hover:bg-gray-700 rounded-lg text-gray-400 transition-colors\"\n                            title=\"Paste\"\n                        >\n                            <Clipboard size={14} />\n                        </button>\n                        <button \n                            onClick={() => setShowGhToken(!showGhToken)}\n                            className=\"p-1.5 hover:bg-gray-700 rounded-lg text-gray-400 transition-colors\"\n                        >\n                            {showGhToken ? <EyeOff size={14} /> : <Eye size={14} />}\n                        </button>\n                    </div>\n                 </div>\n                 <p className=\"text-[10px] text-gray-600\">This token is used once to create the repo and upload files. It is not saved.</p>\n             </div>\n             \n             <div className=\"flex flex-col gap-1\">\n                 <label className=\"text-[10px] uppercase font-bold text-gray-500\">Repository Name</label>\n                 <input \n                    type=\"text\" \n                    placeholder=\"my-chore-tracker\" \n                    className=\"bg-black/40 border border-gray-800 rounded-xl px-4 py-3 text-sm text-white focus:border-white outline-none font-mono\"\n                    value={ghRepo}\n                    onChange={(e) => setGhRepo(e.target.value)}\n                 />\n             </div>\n\n             <div className=\"flex flex-col gap-1\">\n                 <label className=\"text-[10px] uppercase font-bold text-gray-500\">Target Branch</label>\n                 <div className=\"relative\">\n                    <input \n                        type=\"text\" \n                        placeholder=\"main\" \n                        className=\"w-full bg-black/40 border border-gray-800 rounded-xl px-4 py-3 text-sm text-white focus:border-white outline-none font-mono pl-10\"\n                        value={ghBranch}\n                        onChange={(e) => setGhBranch(e.target.value)}\n                    />\n                    <GitBranch size={16} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500\" />\n                 </div>\n                 <p className=\"text-[10px] text-gray-600\">If the branch doesn't exist, it will be created from the default branch.</p>\n             </div>\n\n             <button \n                onClick={handleGithubUpload}\n                disabled={isUploading}\n                className=\"w-full bg-white hover:bg-gray-200 text-black py-3 rounded-xl text-sm font-bold transition-all mt-2 flex items-center justify-center gap-2 disabled:opacity-50\"\n             >\n                 {isUploading ? <Activity className=\"animate-spin\" size={16}/> : <Github size={16}/>}\n                 {isUploading ? 'Uploading Project...' : 'Create Repo & Upload Project'}\n             </button>\n         </div>\n      </section>\n\n      {/* Migration / Recovery Section */}\n      <section className=\"bg-gray-800/40 border border-gray-800 rounded-3xl p-6\">\n         <h2 className=\"text-sm font-black text-gray-400 uppercase tracking-widest mb-6 flex items-center gap-2\"> <Database size={20} className=\"text-purple-500\" /> Cloud Tools </h2>\n         \n         <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n             {/* Export */}\n             <div className=\"bg-gray-900/60 p-5 rounded-2xl border border-gray-800\">\n                 <h3 className=\"text-white font-bold mb-2 flex items-center gap-2\"><Download size={16} className=\"text-blue-500\"/> Local Export</h3>\n                 <p className=\"text-[10px] text-gray-500 font-bold uppercase mb-4 leading-relaxed tracking-wide\">Generate a secure JSON backup of your family data.</p>\n                 <button onClick={handleExport} className=\"w-full flex items-center justify-center gap-2 bg-gray-800 hover:bg-gray-700 text-white py-3 rounded-xl text-sm font-bold transition-all mb-3\">\n                     <Copy size={14}/> Generate & Copy\n                 </button>\n                 {exportJson && (\n                    <div className=\"relative\">\n                        <textarea \n                            readOnly \n                            className=\"w-full bg-black/40 border border-gray-800 rounded-xl text-[10px] text-gray-500 p-3 h-24 font-mono focus:outline-none scrollbar-hide\"\n                            value={exportJson}\n                        />\n                        <button onClick={() => setExportJson('')} className=\"absolute top-2 right-2 text-gray-600 hover:text-white\">\n                            <X size={14} />\n                        </button>\n                    </div>\n                 )}\n             </div>\n\n             {/* Import */}\n             <div className=\"bg-gray-900/60 p-5 rounded-2xl border border-gray-800\">\n                 <h3 className=\"text-white font-bold mb-2 flex items-center gap-2\"><Upload size={16} className=\"text-purple-500\"/> Restore Hub</h3>\n                 <p className=\"text-[10px] text-gray-500 font-bold uppercase mb-4 leading-relaxed tracking-wide\">Import existing family structures via valid JSON.</p>\n                 <textarea \n                    className=\"w-full bg-black/40 border border-gray-800 rounded-xl text-[10px] text-gray-300 p-3 h-24 mb-3 font-mono outline-none focus:border-purple-500\"\n                    placeholder='Paste backup string...'\n                    value={importJson}\n                    onChange={(e) => setImportJson(e.target.value)}\n                 />\n                 <button \n                    onClick={handleImport} \n                    disabled={isImporting || !importJson}\n                    className=\"w-full bg-purple-600 hover:bg-purple-500 disabled:bg-gray-800 disabled:text-gray-600 text-white py-3 rounded-xl text-sm font-bold transition-all\"\n                 >\n                     {isImporting ? 'Processing...' : 'Restore Assets'}\n                 </button>\n             </div>\n         </div>\n      </section>\n      \n      <div className=\"text-center pt-8 border-t border-gray-800 text-gray-600 text-[10px] font-black uppercase tracking-widest\">\n          Instance ID: {appId}\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-[#09090b] text-gray-200 p-4 pb-24 md:p-8\">\n      <div className=\"max-w-2xl mx-auto\">\n        {view === 'dashboard' && renderDashboard()}\n        {view === 'chore_detail' && renderChoreDetail()}\n        {view === 'settings' && renderSettings()}\n        {view === 'stats' && renderStats()}\n      </div>\n\n      {/* Persistent Bottom Nav for Mobile */}\n      <nav className=\"fixed bottom-0 left-0 right-0 bg-gray-900/80 backdrop-blur-xl border-t border-gray-800 px-6 py-4 flex justify-around items-center md:hidden z-50\">\n          <button onClick={() => setView('dashboard')} className={`flex flex-col items-center gap-1 ${view === 'dashboard' ? 'text-blue-500' : 'text-gray-500'}`}>\n              <Activity size={20} />\n              <span className=\"text-[8px] font-black uppercase tracking-widest\">Home</span>\n          </button>\n          <button onClick={() => setView('stats')} className={`flex flex-col items-center gap-1 ${view === 'stats' ? 'text-purple-500' : 'text-gray-500'}`}>\n              <Trophy size={20} />\n              <span className=\"text-[8px] font-black uppercase tracking-widest\">Stats</span>\n          </button>\n          <button onClick={() => setView('settings')} className={`flex flex-col items-center gap-1 ${view === 'settings' ? 'text-gray-200' : 'text-gray-500'}`}>\n              <Settings size={20} />\n              <span className=\"text-[8px] font-black uppercase tracking-widest\">Admin</span>\n          </button>\n      </nav>\n    </div>\n  );\n};\n\nexport default App;"
  }
];